<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Three Gifts for You ğŸ’–</title>
<style>
body {
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #ffd6e8, #ffeef5);
  text-align: center;
  padding: 20px;
}

h1 {
  color: #ff4d88;
}

.gifts {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 30px;
}

.gift {
  width: 120px;
  height: 120px;
  background: #ff85b3;
  border-radius: 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40px;
  cursor: pointer;
  color: white;
  transition: 0.3s;
}

.gift.locked {
  background: #bbb;
  cursor: not-allowed;
}

.section {
  display: none;
  margin-top: 30px;
}

button {
  padding: 10px 20px;
  border: none;
  border-radius: 10px;
  background: #ff4d88;
  color: white;
  cursor: pointer;
  margin-top: 15px;
}

.choice {
  display: block;
  margin: 10px auto;
  padding: 10px;
  width: 260px;
  background: #fff;
  border-radius: 10px;
  cursor: pointer;
}

.meter {
  font-size: 40px;
  margin: 15px;
}

.explode {
  animation: boom 0.6s ease-out forwards;
}

@keyframes boom {
  0% { transform: scale(1); opacity: 1; }
  100% { transform: scale(3); opacity: 0; }
}

.jar {
  font-size: 80px;
  cursor: pointer;
}

.reason {
  margin-top: 20px;
  font-size: 20px;
  color: #d6336c;
}
</style>
</head>
<body>

<h1>ğŸ Three Gifts for You ğŸ</h1>

<div class="gifts">
  <div class="gift" id="gift1" onclick="openGift(1)">ğŸ</div>
  <div class="gift" id="gift2" onclick="openGift(2)">ğŸ</div>
  <div class="gift" id="gift3" onclick="openGift(3)">ğŸ</div>
</div>

<!-- GIFT 1 -->
<div class="section" id="section1">
  <h2>Gift 1: Puzzle ğŸ’•</h2>
  <p>You already completed this before ğŸ˜‰</p>
  <button onclick="completeGift(1)">Finish Puzzle</button>
</div>

<!-- GIFT 2 -->
<div class="section" id="section2">
  <h2>Now is the time for a quiz ğŸ“</h2>
  <div class="meter" id="meter">ğŸ˜„</div>
  <div id="question"></div>
  <div id="choices"></div>
</div>

<!-- GIFT 3 -->
<div class="section" id="section3">
  <h2>Why I Love You Jar ğŸ’–</h2>
  <div class="jar" onclick="pullReason()">ğŸ¯</div>
  <div class="reason" id="reason"></div>
</div>

<script>
let completed = JSON.parse(localStorage.getItem("completed")) || [];

function openGift(num) {
  if (completed.includes(num)) return;
  document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
  document.getElementById('section' + num).style.display = 'block';
}

function completeGift(num) {
  completed.push(num);
  localStorage.setItem("completed", JSON.stringify(completed));
  document.getElementById('gift' + num).classList.add('locked');
  document.getElementById('section' + num).style.display = 'none';
}

/* ---------- GIFT 2 QUIZ ---------- */
let meter = 3;
const meterEl = document.getElementById("meter");

const quiz = [
  { q: "When is my birthday?", a: "June 22, 1998", c: ["June 10, 1998", "June 18, 1998", "June 30, 1998"] },
  { q: "What is my nickname?", a: "Bebe", c: ["Baby", "Love", "BB"] },
  { q: "When was the first time we talked on Instagram?", a: "March 2, 2024", c: ["March 10, 2024", "March 15, 2024", "March 20, 2024"] },
  { q: "When was the first time you said I love you?", a: "June 3, 2024", c: ["June 10, 2024", "June 15, 2024", "June 20, 2024"] },
  { q: "When was the first time I told you I love you?", a: "July 23, 2024", c: ["July 10, 2024", "July 15, 2024", "July 30, 2024"] },
  { q: "When did we became MU?", a: "April 27, 2024", c: ["April 10, 2024", "April 15, 2024", "April 30, 2024"] }
];

let qi = 0;

function loadQuestion() {
  if (qi >= quiz.length) {
    completeGift(2);
    return;
  }

  const q = quiz[qi];
  document.getElementById("question").innerText = q.q;

  let choices = [...q.c, q.a].sort(() => Math.random() - 0.5);
  const choicesDiv = document.getElementById("choices");
  choicesDiv.innerHTML = "";

  choices.forEach(choice => {
    const div = document.createElement("div");
    div.className = "choice";
    div.innerText = choice;
    div.onclick = () => checkAnswer(choice === q.a);
    choicesDiv.appendChild(div);
  });
}

function checkAnswer(correct) {
  if (correct) {
    meter = Math.min(5, meter + 1);
    meterEl.textContent = "ğŸ˜„";
    qi++;
    loadQuestion();
  } else {
    meter--;
    meterEl.textContent = "ğŸ˜¡";
    if (meter <= 0) {
      meterEl.classList.add("explode");
      document.getElementById("choices").innerHTML =
        "You forget about me ğŸ˜¿<br>You don't love me";
    }
  }
}

loadQuestion();

/* ---------- GIFT 3 LOVE JAR ---------- */
let reasons = [
  "Because you make me feel safe",
  "Because you listen to me",
  "Because you choose me",
  "Because you are patient with me",
  "Because you are my home",
  "Because you love me in ways I understand"
];

function pullReason() {
  if (reasons.length === 0) {
    completeGift(3);
    return;
  }
  const i = Math.floor(Math.random() * reasons.length);
  document.getElementById("reason").innerText = reasons.splice(i, 1)[0];
}

/* Lock completed gifts on load */
completed.forEach(n => document.getElementById('gift' + n).classList.add('locked'));
</script>

</body>
</html>
