<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Valentine</title>

<style>
body {
  margin:0;
  font-family:'Arial', sans-serif;
  text-align:center;
  background:linear-gradient(to bottom right,#ffdde1,#ee9ca7);
  overflow-x:hidden;
}

.hidden { display:none; }

button {
  padding:12px 25px;
  border:none;
  border-radius:25px;
  background:#ff4d6d;
  color:white;
  font-size:16px;
  cursor:pointer;
  margin:10px;
}

button:hover { opacity:0.8; }

.gift-container {
  display:flex;
  justify-content:center;
  gap:30px;
  margin-top:50px;
  flex-wrap:wrap;
}

.gift {
  font-size:60px;
  cursor:pointer;
  transition:0.3s;
}

.gift.completed {
  opacity:0.5;
  pointer-events:none;
}

#puzzle {
  width:300px;
  height:300px;
  margin:20px auto;
  display:grid;
  grid-template-columns:repeat(3,1fr);
  grid-template-rows:repeat(3,1fr);
  gap:2px;
}

.piece {
  width:100%;
  height:100%;
  background-size:300px 300px;
  cursor:pointer;
}

.meter {
  font-size:40px;
  margin:20px;
}

.choice {
  display:block;
  margin:10px auto;
  padding:10px;
  width:250px;
  border-radius:20px;
  background:white;
  cursor:pointer;
}

.jar-box {
  margin-top:30px;
  font-size:20px;
  min-height:60px;
}
</style>
</head>

<body>

<!-- PAGE 1 -->
<div id="intro">
  <h1>Can you be my Valentine? üíñ</h1>
  <button onclick="startGifts()">Yes of course!</button>
</div>

<!-- GIFT PAGE -->
<div id="giftPage" class="hidden">
  <h2>Choose your gift üéÅ</h2>
  <div class="gift-container">
    <div class="gift" id="gift1" onclick="openGift(1)">üéÅ</div>
    <div class="gift" id="gift2" onclick="openGift(2)">üéÅ</div>
    <div class="gift" id="gift3" onclick="openGift(3)">üéÅ</div>
  </div>
</div>

<!-- GIFT 1 -->
<div id="gift1Content" class="hidden">
  <h2>Put the picture together üíï</h2>
  <div id="puzzle"></div>
  <p id="puzzleMessage"></p>
</div>

<!-- GIFT 2 -->
<div id="gift2Content" class="hidden">
  <h2 id="quizTitle"></h2>
  <div class="meter">
    <span id="happy">üòä</span>
    <span id="anger">üò°</span>
  </div>
  <div id="questionBox"></div>
</div>

<!-- GIFT 3 -->
<div id="gift3Content" class="hidden">
  <h2>Why I Love You Jar üíå</h2>
  <button onclick="showReason()">Open a reason</button>
  <div class="jar-box" id="reasonText"></div>
  <button onclick="finishGift(3)">Back to Gifts</button>
</div>

<script>
let completed = {1:false,2:false,3:false};

function startGifts(){
  document.getElementById("intro").classList.add("hidden");
  document.getElementById("giftPage").classList.remove("hidden");
}

function openGift(num){
  document.getElementById("giftPage").classList.add("hidden");
  document.getElementById("gift"+num+"Content").classList.remove("hidden");

  if(num===1) initPuzzle();
  if(num===2) startQuiz();
}

function finishGift(num){
  completed[num]=true;
  document.getElementById("gift"+num).classList.add("completed");

  document.getElementById("gift"+num+"Content").classList.add("hidden");
  document.getElementById("giftPage").classList.remove("hidden");
}

/////////////////////////////////////////////////
// GIFT 1 PUZZLE
/////////////////////////////////////////////////

const imageURL = "YOUR_CAT_IMAGE_URL_HERE";

function initPuzzle(){
  const puzzle=document.getElementById("puzzle");
  puzzle.innerHTML="";
  let pieces=[];
  for(let i=0;i<9;i++){
    pieces.push(i);
  }
  pieces.sort(()=>Math.random()-0.5);

  pieces.forEach(i=>{
    const div=document.createElement("div");
    div.className="piece";
    div.draggable=true;
    div.dataset.index=i;
    div.style.backgroundImage=`url(${imageURL})`;
    div.style.backgroundPosition=`${-(i%3)*100}px ${-Math.floor(i/3)*100}px`;

    div.addEventListener("dragstart",dragStart);
    div.addEventListener("dragover",dragOver);
    div.addEventListener("drop",drop);

    puzzle.appendChild(div);
  });
}

let dragged;

function dragStart(){
  dragged=this;
}

function dragOver(e){
  e.preventDefault();
}

function drop(){
  let temp=this.style.backgroundPosition;
  this.style.backgroundPosition=dragged.style.backgroundPosition;
  dragged.style.backgroundPosition=temp;

  checkWin();
}

function checkWin(){
  const pieces=document.querySelectorAll(".piece");
  let correct=true;
  pieces.forEach((piece,i)=>{
    const correctPos=`${-(i%3)*100}px ${-Math.floor(i/3)*100}px`;
    if(piece.style.backgroundPosition!==correctPos){
      correct=false;
    }
  });

  if(correct){
    document.getElementById("puzzleMessage").innerHTML=
    "This is my favorite picture of you üíï";
    setTimeout(()=>finishGift(1),2000);
  }
}

/////////////////////////////////////////////////
// GIFT 2 QUIZ
/////////////////////////////////////////////////

let quizIndex=0;
let happiness=5;
let anger=5;

const quiz=[
{q:"When is my birthday?",
a:["June 22, 1998","May 22, 1998","June 12, 1998","July 22, 1998"],
c:"June 22, 1998"},
{q:"What is my nickname?",
a:["Bebe","Baby","Love","Honey"],
c:"Bebe"},
{q:"When was the first time we talked on Instagram?",
a:["March 2, 2024","March 5, 2024","April 2, 2024","February 2, 2024"],
c:"March 2, 2024"},
{q:"When was the first time you said I love you?",
a:["June 3, 2024","June 5, 2024","July 3, 2024","May 3, 2024"],
c:"June 3, 2024"},
{q:"When was the first time I told you I love you?",
a:["July 23, 2024","July 20, 2024","August 23, 2024","June 23, 2024"],
c:"July 23, 2024"},
{q:"When did we became MU?",
a:["April 27, 2024","April 20, 2024","May 27, 2024","March 27, 2024"],
c:"April 27, 2024"},
{q:"When was our first video call?",
a:["September 14, 2024","September 10, 2024","October 14, 2024","August 14, 2024"],
c:"September 14, 2024"},
{q:"When was the first time you held my hand?",
a:["October 9, 2025","October 5, 2025","September 9, 2025","November 9, 2025"],
c:"October 9, 2025"},
{q:"When was our first kiss?",
a:["October 10, 2025","October 8, 2025","November 10, 2025","September 10, 2025"],
c:"October 10, 2025"},
{q:"When did we became officially together?",
a:["January 1, 2026","January 2, 2026","February 1, 2026","December 31, 2025"],
c:"January 1, 2026"}
];

function startQuiz(){
  quizIndex=0;
  happiness=5;
  anger=5;
  document.getElementById("quizTitle").innerText=
  "Now is the time for a quiz. Please answer these 10 questions üíå";
  showQuestion();
}

function showQuestion(){
  if(quizIndex>=quiz.length){
    if(happiness>=anger){
      alert("I love you so much üéâ");
    }else{
      alert("You forget about me üòø You don't love me");
    }
    finishGift(2);
    return;
  }

  const q=quiz[quizIndex];
  const box=document.getElementById("questionBox");
  box.innerHTML="<h3>"+q.q+"</h3>";

  let answers=[...q.a];
  answers.sort(()=>Math.random()-0.5);

  answers.forEach(ans=>{
    const div=document.createElement("div");
    div.className="choice";
    div.innerText=ans;
    div.onclick=()=>selectAnswer(ans,q.c);
    box.appendChild(div);
  });

  updateMeter();
}

function selectAnswer(ans,correct){
  if(ans===correct){
    happiness++;
  }else{
    anger++;
  }
  quizIndex++;
  showQuestion();
}

function updateMeter(){
  document.getElementById("happy").style.fontSize=happiness*8+"px";
  document.getElementById("anger").style.fontSize=anger*8+"px";
}

/////////////////////////////////////////////////
// GIFT 3 JAR
/////////////////////////////////////////////////

const reasons=[
"You make me feel safe.",
"You understand me.",
"You make distance feel small.",
"You are patient with me.",
"You make me smile everyday.",
"You feel like home.",
"You choose me everyday.",
"You make my world brighter."
];

function showReason(){
  const random=reasons[Math.floor(Math.random()*reasons.length)];
  document.getElementById("reasonText").innerText=random;
}
</script>

</body>
</html>
