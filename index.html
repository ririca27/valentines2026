<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine 游눘</title>

<style>
body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(180deg, #fff0f5, #ffe4ec);
  text-align: center;
}

.hidden { display: none; }

button {
  padding: 12px 22px;
  border-radius: 20px;
  border: none;
  font-size: 16px;
  cursor: pointer;
}

#yesBtn { background: #ff5e8a; color: white; }
#noBtn { background: #ddd; position: absolute; }

.gifts {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 40px;
}

.gift {
  width: 120px;
  height: 120px;
  background: #ffb6c1;
  border-radius: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40px;
  cursor: pointer;
}

.gift.completed {
  background: #ffd1dc;
  opacity: 0.7;
}

.meter {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 40px;
  margin: 20px 0;
}

.meter span {
  font-size: 42px;
  transition: transform 0.3s;
  position: relative;
}

.answers button {
  display: block;
  margin: 10px auto;
  width: 80%;
}

/* 游댮 subtle particle explosion */
.particle {
  position: absolute;
  width: 6px;
  height: 6px;
  background: #ff5e8a;
  border-radius: 50%;
  pointer-events: none;
  animation: explode 600ms ease-out forwards;
}

@keyframes explode {
  from {
    transform: translate(0,0) scale(1);
    opacity: 1;
  }
  to {
    transform: translate(var(--x), var(--y)) scale(0.3);
    opacity: 0;
  }
}
</style>
</head>

<body>

<!-- PAGE 1 -->
<div id="page1">
  <h1>Can you be my Valentine? 游눘</h1>
  <button id="yesBtn">Yes</button>
  <button id="noBtn">No</button>
</div>

<!-- GIFTS -->
<div id="giftsPage" class="hidden">
  <h2>Choose a gift 游꾸</h2>
  <div class="gifts">
    <div class="gift" id="gift1">游꾸</div>
    <div class="gift" id="gift2">游꾸</div>
    <div class="gift" id="gift3">游꾸</div>
  </div>
</div>

<!-- GIFT 1 (UNCHANGED / YOUR EXISTING PUZZLE GOES HERE) -->
<div id="gift1Page" class="hidden"></div>

<!-- GIFT 2 -->
<div id="gift2Page" class="hidden">
  <h2>Now is the time for a quiz 游눏<br>Please answer these 10 questions</h2>

  <div class="meter">
    <span id="anger">游</span>
    <span id="happy">游땘</span>
  </div>

  <div id="quiz"></div>
</div>

<div id="resultPage" class="hidden"></div>

<script>
/* No button runs away */
noBtn.onmouseover = () => {
  noBtn.style.left = Math.random() * 80 + "%";
  noBtn.style.top = Math.random() * 80 + "%";
};

yesBtn.onclick = () => {
  page1.classList.add("hidden");
  giftsPage.classList.remove("hidden");
};

gift2.onclick = () => {
  giftsPage.classList.add("hidden");
  gift2Page.classList.remove("hidden");
  startQuiz();
};

let angerLevel = 5;
let happyLevel = 5;
let current = 0;

const questions = [
  { q:"When is my birthday?", correct:"June 22, 1998", choices:["June 10, 1998","June 18, 1998","June 25, 1998"] },
  { q:"What is my nickname?", correct:"Bebe", choices:["Baby","Beh","Love"] },
  { q:"When was the first time we talked on Instagram?", correct:"March 2, 2024", choices:["March 5, 2024","March 10, 2024","March 18, 2024"] },
  { q:"When was the first time you said I love you?", correct:"June 3, 2024", choices:["June 10, 2024","June 15, 2024","June 20, 2024"] },
  { q:"When was the first time I told you I love you?", correct:"July 23, 2024", choices:["July 10, 2024","July 15, 2024","July 30, 2024"] },
  { q:"When did we became MU?", correct:"April 27, 2024", choices:["April 10, 2024","April 15, 2024","April 30, 2024"] },
  { q:"When was our first video call?", correct:"September 14, 2024", choices:["September 5, 2024","September 20, 2024","September 25, 2024"] },
  { q:"When was the first time you held my hand?", correct:"October 9, 2025", choices:["October 1, 2025","October 5, 2025","October 20, 2025"] },
  { q:"When was our first kiss?", correct:"October 10, 2025", choices:["October 3, 2025","October 15, 2025","October 20, 2025"] },
  { q:"When did we became officially together?", correct:"January 1, 2026", choices:["February 1, 2026","March 1, 2026","December 25, 2025"] }
];

function shuffle(arr){
  return arr.sort(() => Math.random() - 0.5);
}

function startQuiz(){
  angerLevel = 5;
  happyLevel = 5;
  current = 0;
  showQuestion();
}

function showQuestion(){
  const q = questions[current];
  const answers = shuffle([q.correct, ...q.choices]);

  quiz.innerHTML = `
    <h3>Question ${current + 1}</h3>
    <p>${q.q}</p>
    <div class="answers">
      ${answers.map(a =>
        `<button onclick="answer('${a.replace(/'/g,"\\'")}')">${a}</button>`
      ).join("")}
    </div>
  `;
}

function explode(target){
  for(let i=0;i<12;i++){
    const p = document.createElement("div");
    p.className = "particle";
    p.style.setProperty("--x", `${(Math.random()*80-40)}px`);
    p.style.setProperty("--y", `${(Math.random()*80-40)}px`);
    target.appendChild(p);
    setTimeout(()=>p.remove(),600);
  }
}

function answer(selected){
  const q = questions[current];

  if(selected === q.correct){
    happyLevel++;
    happy.style.transform = "scale(1.5)";
    setTimeout(()=>happy.style.transform="scale(1)",300);
  } else {
    angerLevel--;
    anger.style.transform = "scale(1.5)";
    setTimeout(()=>anger.style.transform="scale(1)",300);
  }

  if(angerLevel <= 0){
    explode(anger);
    quiz.innerHTML = `
      <h2>You forget about me 游<br>You don't love me</h2>
    `;
    setTimeout(returnToGifts, 2500);
    return;
  }

  current++;
  if(current < questions.length){
    setTimeout(showQuestion, 400);
  } else {
    quiz.innerHTML = `<h2>I love you so much 游눘游꿀</h2>`;
    setTimeout(returnToGifts, 2500);
  }
}

function returnToGifts(){
  gift2.classList.add("completed");
  gift2Page.classList.add("hidden");
  giftsPage.classList.remove("hidden");
}
</script>

</body>
</html>
