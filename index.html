<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Be My Valentine ğŸ’•</title>

<style>
body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(180deg, #fff0f5, #ffffff);
  overflow-x: hidden;
  text-align: center;
}

/* HEART CONFETTI */
.heart {
  position: fixed;
  color: #ff5e8a;
  font-size: 20px;
  animation: float 6s linear infinite;
}
@keyframes float {
  0% { transform: translateY(100vh); opacity: 1; }
  100% { transform: translateY(-10vh); opacity: 0; }
}

/* PAGES */
.page {
  display: none;
  min-height: 100vh;
  padding: 40px 20px;
}
.page.active {
  display: block;
}

/* BUTTONS */
button {
  padding: 14px 26px;
  border-radius: 30px;
  border: none;
  font-size: 16px;
  cursor: pointer;
  margin: 10px;
}

.yes {
  background: #ff5e8a;
  color: white;
}

.no {
  background: #f3f3f3;
  position: absolute;
}

/* GIFTS */
.gifts {
  display: flex;
  justify-content: center;
  gap: 20px;
  flex-wrap: wrap;
}

.gift {
  font-size: 60px;
  cursor: pointer;
  transition: transform 0.3s;
}
.gift:hover {
  transform: scale(1.2);
}

/* PUZZLE */
#puzzle {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  max-width: 300px;
  margin: 20px auto;
  gap: 4px;
}

.tile {
  width: 100%;
  aspect-ratio: 1/1;
  background-image: url('photo1.jpg');
  background-size: 300% 300%;
  cursor: pointer;
  border-radius: 8px;
}

.hidden {
  display: none;
}

#puzzleMessage {
  margin-top: 20px;
  font-size: 18px;
  color: #ff5e8a;
}
</style>
</head>

<body>

<!-- PAGE 1 -->
<div class="page active" id="page1">
  <h1>ğŸ’– Can you be my Valentine? ğŸ’–</h1>
  <p>I promise soft love, bad jokes, and endless affection.</p>
  <button class="yes" onclick="goToGifts()">Yes ğŸ’˜</button>
  <button class="no" id="noBtn">No ğŸ™ƒ</button>
</div>

<!-- PAGE 2 -->
<div class="page" id="page2">
  <h2>Choose a gift ğŸ</h2>
  <div class="gifts">
    <div class="gift" onclick="openPuzzle()">ğŸ</div>
    <div class="gift">ğŸ</div>
    <div class="gift">ğŸ</div>
  </div>
</div>

<!-- PAGE 3 -->
<div class="page" id="page3">
  <h2>Put it together ğŸ§©</h2>
  <div id="puzzle"></div>
  <div id="puzzleMessage" class="hidden">
    ğŸ’• This is my favorite picture of you ğŸ’•
  </div>
</div>

<script>
/* MOVING NO BUTTON */
const noBtn = document.getElementById("noBtn");
noBtn.addEventListener("mouseover", () => {
  noBtn.style.left = Math.random() * 80 + "vw";
  noBtn.style.top = Math.random() * 80 + "vh";
});

/* HEART CONFETTI */
setInterval(() => {
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.innerHTML = "ğŸ’—";
  heart.style.left = Math.random() * 100 + "vw";
  heart.style.fontSize = Math.random() * 20 + 10 + "px";
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 6000);
}, 300);

/* NAVIGATION */
function goToGifts() {
  document.getElementById("page1").classList.remove("active");
  document.getElementById("page2").classList.add("active");
}

function openPuzzle() {
  document.getElementById("page2").classList.remove("active");
  document.getElementById("page3").classList.add("active");
  initPuzzle();
}

/* PUZZLE LOGIC (3x3) */
const size = 3;
let tiles = [];

function initPuzzle() {
  const puzzle = document.getElementById("puzzle");
  puzzle.innerHTML = "";
  tiles = [...Array(size * size).keys()];
  tiles.sort(() => Math.random() - 0.5);

  tiles.forEach((pos, index) => {
    const tile = document.createElement("div");
    tile.className = "tile";
    tile.dataset.index = index;

    const x = pos % size;
    const y = Math.floor(pos / size);
    tile.style.backgroundPosition = `${(x / (size - 1)) * 100}% ${(y / (size - 1)) * 100}%`;

    tile.onclick = () => swap(index);
    puzzle.appendChild(tile);
  });
}

function swap(index) {
  if (index === 0) return;
  [tiles[index], tiles[0]] = [tiles[0], tiles[index]];
  initPuzzle();
  checkSolved();
}

function checkSolved() {
  const solved = tiles.every((v, i) => v === i);
  if (solved) {
    document.getElementById("puzzleMessage").classList.remove("hidden");
  }
}
</script>

</body>
</html>
