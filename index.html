<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Be My Valentine ğŸ’•</title>

<style>
body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(180deg, #fff0f5, #ffffff);
  text-align: center;
  overflow-x: hidden;
}

/* HEART CONFETTI */
.heart {
  position: fixed;
  font-size: 18px;
  animation: float 6s linear infinite;
}
@keyframes float {
  from { transform: translateY(100vh); opacity: 1; }
  to { transform: translateY(-10vh); opacity: 0; }
}

/* EXPLODING ANGER */
.explode {
  animation: boom 0.6s ease forwards;
}
@keyframes boom {
  0% { transform: scale(1); opacity: 1; }
  60% { transform: scale(2.5) rotate(20deg); }
  100% { transform: scale(0); opacity: 0; }
}

/* PAGES */
.page { display: none; min-height: 100vh; padding: 40px 20px; }
.page.active { display: block; }

/* BUTTONS */
button {
  padding: 14px 26px;
  border-radius: 30px;
  border: none;
  font-size: 16px;
  cursor: pointer;
  margin: 10px;
}
.yes { background: #ff5e8a; color: white; }
.no { background: #f3f3f3; position: absolute; }

/* GIFTS */
.gifts {
  display: flex;
  justify-content: center;
  gap: 25px;
}
.gift {
  font-size: 60px;
  cursor: pointer;
  transition: transform 0.3s;
}
.gift.done {
  opacity: 0.6;
  transform: scale(0.9);
}
.gift:hover { transform: scale(1.2); }

/* PUZZLE */
#puzzle {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  max-width: 300px;
  margin: 20px auto;
  gap: 6px;
}
.tile {
  aspect-ratio: 1/1;
  background-image: url("favpicofyou.jpg");
  background-size: 300% 300%;
  border-radius: 10px;
  cursor: grab;
}
.hidden { display: none; }

/* QUIZ */
.quiz-box { max-width: 520px; margin: 30px auto; }

.choice {
  background: #fff;
  border: 2px solid #ffd1dc;
  padding: 14px;
  border-radius: 16px;
  margin: 10px 0;
  cursor: pointer;
  transition: all 0.3s;
}
.choice:hover { background: #fff0f5; }

/* METER */
.meter-area { margin: 20px auto; max-width: 300px; }
.meter {
  height: 18px;
  background: #eee;
  border-radius: 20px;
  overflow: hidden;
}
.meter-fill {
  height: 100%;
  width: 50%;
  background: linear-gradient(90deg, #ff7676, #ffd56b, #7bed9f);
  transition: width 0.6s ease;
}
.emoji-row {
  display: flex;
  justify-content: space-between;
  font-size: 26px;
  margin-bottom: 5px;
}
.emoji {
  transition: transform 0.4s ease;
}
.big { transform: scale(1.6); }

/* RESULT */
.result img {
  max-width: 200px;
  margin-top: 20px;
}

/* VIDEO PAGE */
.video-container video {
  max-width: 90%;
  border-radius: 20px;
  margin-top: 20px;
}
</style>
</head>

<body>

<!-- PAGE 1 -->
<div class="page active" id="page1">
  <h1>ğŸ’– Can you be my Valentine? ğŸ’–</h1>
  <button class="yes" onclick="goToGifts()">Yes ğŸ’˜</button>
  <button class="no" id="noBtn">No ğŸ™ƒ</button>
</div>

<!-- PAGE 2 -->
<div class="page" id="page2">
  <h2>Choose a gift ğŸ</h2>
  <div class="gifts">
    <div class="gift" id="gift1" onclick="openPuzzle()">ğŸ</div>
    <div class="gift" id="gift2" onclick="openQuiz()">ğŸ</div>
    <div class="gift" id="gift3" onclick="openVideo()">ğŸ</div>
  </div>
</div>

<!-- PAGE 3 â€“ PUZZLE -->
<div class="page" id="page3">
  <h2>Put it together ğŸ§©</h2>
  <h3>Drag and drop the puzzle piece to its correct position</h3>
  <div id="puzzle"></div>
  <p id="puzzleMessage" class="hidden">ğŸ’• This is my favorite picture of you ğŸ’•</p>
</div>

<!-- PAGE 4 â€“ QUIZ -->
<div class="page" id="page4">
  <h2>Now is the time for a quiz ğŸ’—<br>Please answer these 10 questions</h2>

  <div class="meter-area">
    <div class="emoji-row">
      <span id="angry" class="emoji">ğŸ˜ </span>
      <span id="happy" class="emoji">ğŸ˜„</span>
    </div>
    <div class="meter">
      <div class="meter-fill" id="meterFill"></div>
    </div>
  </div>

  <div class="quiz-box" id="quizBox"></div>
</div>

<!-- PAGE 5 â€“ VIDEO -->
<div class="page" id="page5">
  <h2>ğŸ’– For You ğŸ’–</h2>
  <div class="video-container">
    <video id="loveVideo" autoplay controls>
      <source src="Happyvalentinespaps.mp4" type="video/mp4">
    </video>
  </div>
</div>

<script>

/* VIDEO FUNCTION */
function openVideo(){
  page2.classList.remove("active");
  page5.classList.add("active");

  const vid = document.getElementById("loveVideo");
  vid.play();

  vid.onended = function(){
    backToGifts("gift3");
  };
}

</script>

<!-- YOUR ORIGINAL SCRIPTS BELOW (UNCHANGED) -->

<script>
/* ========= GIFT 1 â€“ PUZZLE ========= */
function openPuzzle(){
  page2.classList.remove("active");
  page3.classList.add("active");
  initPuzzle();
}
function initPuzzle(){
  const puzzle = document.getElementById("puzzle");
  puzzle.innerHTML = "";
  document.getElementById("puzzleMessage").classList.add("hidden");
  const positions = [...Array(9).keys()].sort(()=>Math.random()-0.5);
  positions.forEach((pos, i)=>{
    const tile = document.createElement("div");
    tile.className = "tile";
    tile.draggable = true;
    tile.dataset.correct = i;
    tile.dataset.current = pos;
    tile.style.backgroundPosition =
      `${-(pos % 3) * 100}% ${-Math.floor(pos / 3) * 100}%`;
    tile.addEventListener("dragstart", dragStart);
    tile.addEventListener("dragover", e => e.preventDefault());
    tile.addEventListener("drop", dropTile);
    puzzle.appendChild(tile);
  });
}
let draggedTile = null;
function dragStart(e){ draggedTile = e.target; }
function dropTile(e){
  const target = e.target;
  if (!draggedTile || draggedTile === target) return;
  const temp = draggedTile.style.backgroundPosition;
  draggedTile.style.backgroundPosition = target.style.backgroundPosition;
  target.style.backgroundPosition = temp;
  const tempPos = draggedTile.dataset.current;
  draggedTile.dataset.current = target.dataset.current;
  target.dataset.current = tempPos;
  checkPuzzle();
}
function checkPuzzle(){
  const tiles = document.querySelectorAll(".tile");
  const solved = [...tiles].every(t => t.dataset.current == t.dataset.correct);
  if(solved){
    document.getElementById("puzzleMessage").classList.remove("hidden");
    setTimeout(()=>backToGifts("gift1"),3000);
  }
}
</script>

<script>
noBtn.onmouseover = () => {
  noBtn.style.left = Math.random()*80 + "vw";
  noBtn.style.top = Math.random()*80 + "vh";
};
setInterval(() => {
  const h = document.createElement("div");
  h.className = "heart";
  h.textContent = "ğŸ’—";
  h.style.left = Math.random()*100 + "vw";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),6000);
},300);
function goToGifts() {
  page1.classList.remove("active");
  page2.classList.add("active");
}
function backToGifts(id) {
  document.getElementById(id).classList.add("done");
  page5.classList.remove("active");
  page4.classList.remove("active");
  page3.classList.remove("active");
  page2.classList.add("active");
}
</script>

</body>
</html>
